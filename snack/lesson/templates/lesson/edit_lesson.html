{% extends 'base_lesson_edit.html' %}
{% load static %}
{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="lesson-content">
    <!--SIDEBAR-->
    <div class="lesson-sidebar" data-course-id="{{course_id}}">
        <div class="lesson-sidebar__body">
            <div class="lesson-sidebar__header">
                <a href="{% url 'syllabus' course_id %}" class="lesson-sidebar__course-title">{{course_name}}</a>
                <div class="lesson-sidebar__course-progress-wrap">
                    <p class="lesson-sidebar__course-progress">–ü—Ä–æ–≥—Ä–µ—Å —É –∫—É—Ä—Å—ñ: 3/61</p>
                    <div class="lesson-sidebar__progress-line">
                        <div class="lesson-sidebar__progress-line-done"></div>
                    </div>
                </div>
            </div>

            <div class="lesson-sidebar__content">

                {% for module in modules %}
                <div class="lesson-sidebar__module-header">
                    <div class="line-progress-bar-done" style="height: 33%;">&nbsp;</div>
                    <div class="sidebar-module-header__title" style="width: 100%;" title="{{module.name}}">
                        {{forloop.counter}} {{module.name}}
                    </div>
                </div>
                {% with j=forloop.counter %}
                {% for lesson in module.lessons %}
                <a class="lesson-sidebar__lessons-inner" data-lesson-id="1" href="{% url 'edit_lessons' lesson.id 1 %}">
                    <div class="lesson-sidebar__lesson-header">
                        <div class="line-progress-bar-done" style="height: 88%;">&nbsp;</div>
                        <div class="sidebar-lesson-header__title" style="width: 100%;"
                             title="{{lesson.name}}">
                            {{j}}.{{forloop.counter}} {{lesson.name}}
                        </div>
                    </div>
                </a>
                {% endfor %}
                {% endwith %}
                {% endfor %}
            </div>

            <div class="lesson-sidebar__footer">
                <div class="lesson-controls">
                    <svg width="8mm" height="8.00002mm" viewBox="0 0 9.9999996 10.00002">
                        <g transform="translate(-48.57283,-108.30979)">
                            <path style="color:#000000;fill:#ffffff;stroke-width:0.961311;stroke-linecap:round;stroke-linejoin:round;-inkscape-stroke:none"
                                  d="m 51.63343,108.30979 c -1.68439,0 -3.0606,1.37821 -3.0606,3.06259 v 0.14655 h 1.30899 v -0.14655 c 0,-0.98209 0.76952,-1.7536 1.75161,-1.7536 h 0.14854 v -1.30899 z m 3.73027,0 v 1.30899 h 0.14704 c 0.9821,0 1.75361,0.77151 1.75361,1.7536 v 0.14655 h 1.30848 v -0.14655 c 0,-1.68438 -1.3777,-3.06259 -3.06209,-3.06259 z m -6.79087,6.79087 v 0.14853 c 0,1.68442 1.37621,3.06062 3.0606,3.06062 h 0.14854 v -1.3085 h -0.14854 c -0.98209,0 -1.75161,-0.77 -1.75161,-1.75212 v -0.14853 z m 8.69152,0 v 0.14853 c 0,0.98212 -0.77151,1.75212 -1.75361,1.75212 H 55.3637 v 1.3085 h 0.14704 c 1.68439,0 3.06209,-1.3762 3.06209,-3.06062 v -0.14853 z"></path>
                        </g>
                    </svg>

                </div>
                <div class="lesson-controls">
                    <div>
                        <svg width="9.23186mm" height="9.23181mm" viewBox="0 0 12.23186 12.23181">
                            <g transform="translate(-53.5974,-115.43498)">
                                <path style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:1;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1"
                                      d="m 59.71316,115.43501 c -0.43438,0 -0.78393,0.29015 -0.78393,0.6506 v 0.0419 c -0.9258,0.13535 -1.77282,0.50659 -2.4784,1.05162 l -0.0475,-0.0476 c -0.11151,-0.11147 -0.26113,-0.16596 -0.41962,-0.16639 -0.20376,-5.6e-4 -0.42253,0.0887 -0.59531,0.26148 -0.3069,0.30714 -0.34882,0.75909 -0.094,1.01389 l 0.0693,0.0693 c -0.50361,0.70866 -0.83753,1.54705 -0.94465,2.4567 H 54.248 c -0.36045,0 -0.6506,0.35006 -0.6506,0.78444 0,0.43439 0.29015,0.78393 0.6506,0.78393 h 0.21446 c 0.15192,0.86778 0.51218,1.66191 1.02784,2.32961 l -0.19637,0.1963 c -0.25487,0.2549 -0.21254,0.7078 0.0946,1.015 0.30716,0.3071 0.75953,0.3488 1.01441,0.094 l 0.21859,-0.2186 c 0.66994,0.4761 1.45546,0.8009 2.30787,0.9255 v 0.3395 c 0,0.3605 0.34955,0.6506 0.78393,0.6506 0.43439,0 0.78445,-0.2901 0.78445,-0.6506 v -0.3395 c 0.85231,-0.1246 1.63799,-0.449 2.30787,-0.925 l 0.21807,0.2181 c 0.25488,0.2548 0.70675,0.2131 1.0139,-0.094 0.30716,-0.3072 0.35,-0.7601 0.0951,-1.015 l -0.19637,-0.1963 c 0.51573,-0.6677 0.87592,-1.46176 1.02784,-2.32961 h 0.21446 c 0.36046,0 0.65061,-0.34954 0.65061,-0.78393 0,-0.43438 -0.29015,-0.78444 -0.65061,-0.78444 H 65.0076 c -0.10712,-0.90965 -0.44104,-1.74804 -0.94464,-2.4567 l 0.0692,-0.0693 c 0.25488,-0.25489 0.21263,-0.70725 -0.0946,-1.01441 -0.30715,-0.30715 -0.75953,-0.34944 -1.01441,-0.0946 l -0.0475,0.0476 c -0.70554,-0.54494 -1.55219,-0.91629 -2.47789,-1.05162 v -0.0419 c 0,-0.36045 -0.35006,-0.6506 -0.78445,-0.6506 z m 0,1.95233 c 2.30651,0 4.16357,1.85707 4.16357,4.16357 0,2.30651 -1.85706,4.16358 -4.16357,4.16358 -2.3065,0 -4.16357,-1.85707 -4.16357,-4.16358 0,-2.3065 1.85707,-4.16357 4.16357,-4.16357 z"></path>
                            </g>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <main class="edit-step">
        <div class="wrapper">
            <div>
                <div class="setting_lesson">
                    <div class="lesson__header">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —É—Ä–æ–∫—É</div>
                    <div class="lesson__body">
                        <div class="lesson_name"><input type="text" value="{{lesson.name}}"></div>
                        <div class="lesson_details">
                            <label><input type="checkbox"> –ü—É–±–ª—ñ—á–Ω–∏–π</label>
                            <label><input type="checkbox"> –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ —É–≤—ñ–º–∫–Ω–µ–Ω–æ</label>
                        </div>
                    </div>
                </div>
            </div>


            <div class="step_list">

                {% for item in steps %}
                <div class="step__body">
                    <div class="step__number">{{forloop.counter}}</div>
                    <a href="{% url 'edit_lessons' lesson.id forloop.counter %}" class="step__cover"
                       style="font-size: 12px">{{item.TYPE}}</a>
                </div>
                {% endfor %}
            </div>

            <!-- RENDER STEP-->
            {{step.TYPE}}
            {% if step.TYPE == 'text' %}
            {{step.text_html|safe}}
            <hr>

            <div id="toolbar-container">
                <span class="ql-formats">
                    <select class="ql-font"></select>
                    <select class="ql-size"></select>
                </span>
                <span class="ql-formats">
                    <button class="ql-bold"></button>
                    <button class="ql-italic"></button>
                    <button class="ql-underline"></button>
                    <button class="ql-strike"></button>
                </span>
                <span class="ql-formats">
                    <select class="ql-color"></select>
                    <select class="ql-background"></select>
                </span>
                <span class="ql-formats">
                    <button class="ql-script" value="sub"></button>
                    <button class="ql-script" value="super"></button>
                </span>
                <span class="ql-formats">
                    <button class="ql-header" value="1"></button>
                    <button class="ql-header" value="2"></button>
                    <button class="ql-blockquote"></button>
                    <button class="ql-code-block"></button>
                </span>
                <span class="ql-formats">
                    <button class="ql-list" value="ordered"></button>
                    <button class="ql-list" value="bullet"></button>
                    <button class="ql-indent" value="-1"></button>
                    <button class="ql-indent" value="+1"></button>
                </span>
                <span class="ql-formats">
                    <button class="ql-direction" value="rtl"></button>
                    <select class="ql-align"></select>
                </span>
                <span class="ql-formats">
                    <button class="ql-link"></button>
                    <button class="ql-image"></button>
                    <button class="ql-video"></button>
                    <button class="ql-formula"></button>
                </span>
                <span class="ql-formats">
                    <button class="ql-html" data-editor-show="0" data-editor-created="0">üìù</button>
                </span>
                <span class="ql-formats">
                    <button class="ql-clean"></button>
                </span>
            </div>

            <div class="step__text_html">{{step.text_html|safe}}</div>
            <!--            <div class="step__text_html"></div>-->
            {% endif %}
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
        </div>
    </main>

</div>
</div>

{% endblock %}
