
## Тема уроку: break, continue, else

1. Оператор break;
2. Оператор continue;
3. Нескінченні цикли;
4. Ключове слово else у циклах;
5. Розв'язання задач.

**Аннотація**. Урок присвячений операторам `break` та `continue`, а також необов'язковому блоку `else`.

<h2 align="center"><b>Оператор переривання циклу break</b></h2>

Іноді буває потрібно перервати виконання циклу передчасно. Оператор `break` перериває найближчий цикл `for` або `while`.

Удосконалимо програму, яка перевіряє число на простоту за допомогою оператора break:

```python
Напишемо програму, яка визначає, що число є простим:

num = int(input())
flag = True

for i in range(2, num):
    if num % i == 0: # якщо вихідне число ділиться на якесь відмінне від 1 і самого себе
        flag = False
        break # зупиняємо цикл якщо зустріли дільник числа

if flag == True:
    print('Число просте')
else:
    print('Число складове')
````

Як тільки ми зустрічаємо дільник відмінний від 1 і `num`, ми змінюємо значення сигнальної мітки і перериваємо цикл, оскільки подальше його виконання не має сенсу: число гарантовано не є простим.

> Оператор переривання циклу `break` дозволяє прискорювати програми, оскільки ми позбавляємось зайвих ітерацій.

Напишемо програму, яка використовує цикл `for`, яка зчитує 10 чисел і підсумовує їх доти, доки не виявить негативне число. У цьому випадку виконання циклу переривається командою `break`:

```python
result = 0
for i in range(10):
    num = int(input())
    if num < 0:
        break
    result += num
print(result)
````

> Оператор переривання циклу `break` зручний у зв'язці з **сигнальними мітками**: коли після перевірки деякої умови нам немає сенсу продовжувати виконання циклу.

Напишемо, програму, яка визначає, чи містить введене користувачем число, цифру 7.

```python
num = int(input())
number = num
flag = False
while num != 0:
    last_digit = num % 10
    if last_digit == 7:
        flag = True
        break # перериваємо цикл, тому що число гарантовано містить цифру 7
    num //= 10

if flag == True:
    print('Число', number, 'містить цифру 7')
else:
    print('Число', number, 'не містить цифру 7')
````

Як тільки ми зустріли цифру 7, змінюємо значення сигнальної мітки і перериваємо цикл за допомогою оператора `break`. Ми можемо і не переривати цикл передчасно, а дочекатися його природного завершення (умова `num! = 0`, тобто всі цифри числа оброблені), проте в такому випадку ми будемо виконувати зайву роботу, і якщо число дуже велике, то програма працюватиме повільніше.

<h2 align="center"><b>Нескінченні цикли</b></h2>

У попередніх уроках ми говорили про цикл, який не має можливості завершитися і назвали його нескінченним циклом. Найпростіший спосіб створити нескінченний цикл у Python – записати наступний код:

```python
while True:
    print('Python awesome!')
````

Результатом виконання такого коду буде нескінченна кількість рядків тексту:

```python
Python awesome!
Python awesome!
.
.
.
Python awesome!
Python awesome!
Python awesome!
````

Нескінченний цикл продовжує повторюватися доти, доки програма не буде перервана. Вивчивши оператор `break`, ми отримали механізм переривання нескінченних циклів.

Можливо, вам може здатися, що нескінченні цикли не мають сенсу, проте це не зовсім так. Наприклад, ви можете написати програму, яка запускається та працює, постійно приймаючи запити на обслуговування. Програмний код такої програми може виглядати так:

```python
while True:
    query = get_new_query() # отримуємо новий запит на обробку
    query.process() # обробляємо запит
````

Іноді за допомогою нескінченного циклу вдається зробити програмний код більш читабельним. Простішим може бути завершення циклу на основі умов усередині тіла циклу, а не на основі умов у його заголовку:

```python
while True:
    if умова 1: # умова для зупинки циклу
        break
    ...
    if умова 2: # ще одна умова для зупинки циклу
        break
    ...
    if умова 3: # ще одна умова для зупинки циклу
        break
````

У таких випадках, коли існує безліч причин завершення циклу, часто їх простіше виділити з різних місць, ніж намагатися вказати всі умови завершення в заголовку циклу.

> **Важливо**: нескінченні цикли можуть бути дуже корисними. Просто пам'ятайте, що ви повинні переконатися, що цикл у якийсь момент буде перерваний, щоб він справді не ставав нескінченним.

<h2 align="center"><b>Оператор continue</b></h2>

Інша стандартна ідіома циклів - перепустка окремих елементів при переборі. Оператор `continue` дозволяє перейти до наступної ітерації циклу `for` або `while` до завершення всіх команд у тілі циклу.

Напишемо програму, яка виводить усі числа від 1 до 100, крім чисел 7, 17, 29 та 78.

```python
for i in range(1, 101):
    if i == 7 or i == 17 or i == 29 or i == 78:
        continue # переходимо на наступну ітерацію
    print(i)
````

<h2 align="center"><b>Примітки</b></h2>

**Примітка 1**. Оператор `break` перериває виконання найближчого циклу, а чи не програми, тобто далі буде виконано команда, наступна відразу за циклом.

**Примітка 2**. Графічне подання операторів `break` та `continue` має вигляд:

<div align="center"><img src="https://raw.githubusercontent.com/steamcentre/python_book/main/img/08.png" width="600"></div>

<h2 align="center"><b>Блок else у циклах</b></h2>

Python допускає необов'язковий блок `else` в кінці циклів `while` та `for`. Це унікальна особливість Python, яка не зустрічається в більшості інших програмованих мов. Синтаксис такої конструкції наступний:

```python
while умова:
    блок коду1
else:
    блок коду2

# або

for i in range(10):
    блок коду1
else:
    блок коду2
````

`Блок коду2`, зазначений в `else`, буде виконаний, коли **штатним чином** завершується цикл `while` або `for`.

Зараз ви можете подумати: "Як це може бути корисним?" Адже ми можемо зробити те ж саме, помістивши `блок коду2` відразу після циклу `while` або `for` без `else`:

```python
while умова:
    блок коду1
блок коду2

# або

for i in range(10):
    блок коду1
блок коду2
````

В чому різниця?

Якщо слово `else` відсутнє в описі циклу, то блок `код2` буде виконуватися після завершення циклу, незважаючи ні на що. Якщо ж слово `else` є, то блок `кода2` буде виконуватися тільки в тому випадку, якщо цикл завершується **штатним чином**. Під **штатним завершенням** циклу, мається на увазі його завершення без використання оператора переривання `break`.

Розглянемо наступний програмний код:
"""

n = 5
while n > 0:
    n -= 1
    print(n)
else:
    print('Цикл завершено.')

"""Цей цикл повторюється до того часу, поки істинно умова `n > 0`. Оскільки цикл завершився **штатним чином**, то блок коду в інструкції `else` буде виконаний.

Розглянемо наступний програмний код:
"""

n = 5
while n > 0:
    n -= 1
    print(n)
    if n == 2:
        break
else:
    print('Цикл завершено.')

"""Цей цикл передчасно завершується за допомогою оператора переривання `break`, тому блок коду в інструкції `else` не буде виконаний.

> Вам може здатися, що інструкція `else` у циклах `while` та `for` не зовсім відповідає тому, що реально відбувається. Гвідо ван Россум, творець Python, сказав, що, якби він проектував мову Python заново, то позбувся б "else" у циклах.

Напишемо програму, яка визначає, чи містить введене користувачем число, цифру 7. Замість програмного коду, написаного раніше:

```python
n = int(input())
flag = False
while n != 0:
    last = n% 10
    if last == 7:
        flag = True
        break # перериваємо цикл, тому що число гарантовано містить цифру 7
    n //= 10

if flag is True:
    print('Число', n, 'містить цифру 7')
else:
    print('Число', n, 'не містить цифру 7')
````

ми можемо використовувати:

```python
n = int(input())
while n != 0:
    last = n% 10
    if last == 7:
        print('Число', n, 'містить цифру 7')
        break
    n //= 10
else:
    print('Число', n, 'не містить цифру 7')
````

<h2 align="center"><b>Примітки</b></h2>

**Примітка 1**. Оператор `continue` не впливає на виконання блоку `else` у циклах.

**Примітка 2**. Блок `else` у циклах часто застосовується для обробки відсутності елементів.

**Примітка 3**. Блок коду `else` у циклах зустрічається не так часто на практиці. Однак якщо ви виявите ситуацію, в якій застосування else виправдане, то не соромтеся його використовувати. Це може додати ясності до вашого коду!
